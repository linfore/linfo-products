
        const tree_data = {'MGM (21)': {'Positive Comments': {'great place (2)': [10, 19], 'best hotel (1)': [2], 'top notch (1)': [9], 'excellent hotel (1)': [15], 'one of my staples (1)': [19], 'pleasantly surprising (1)': [32], 'clean and fun (1)': [32], 'always completely satisfied with mgm grand (1)': [33], 'great resort (1)': [34], 'great hotel (1)': [34], 'clean hotel (1)': [36]}, 'Negative Comments': {'makes too much money (1)': [6], 'old, smoke eaters not effective (1)': [11], 'poor response from staff (1)': [17], 'needs a major make over (1)': [22], "won't stay at any hotel on the strip going forward regardless of price (1)": [31], 'mgm… you can do better (1)': [36], 'charged $500 in room smoking penalty (1)': [37], 'not famous (1)': [39], 'way too expensive (1)': [39]}}, 'room (18)': {'Positive Comments': {'clean (1)': [7], 'clean and comfortable (1)': [15], 'rooms were clean (1)': [29], 'great rooms (1)': [33], 'enough space (1)': [34]}, 'Negative Comments': {'criminal charge (1)': [6], 'worst room (1)': [10], 'dirty and smelled like smoke (1)': [12], 'several disappointments related to the room (1)': [14], 'over priced (1)': [16], 'room had a number of issues (1)': [20], 'dated and small (1)': [22], 'no water in the room (1)': [25], 'bad (1)': [27], 'not great (1)': [30], 'dated smelled like cigarettes and rust (1)': [31], 'dark outdated room (1)': [35], 'dirty room (1)': [38]}}, 'pool (7)': {'Positive Comments': {'lots of fun (1)': [32], 'great pools (1)': [33], 'heated and nice (1)': [36]}, 'Negative Comments': {'no pool (1)': [6], 'pool closed (1)': [17], 'bummed we didn’t make it to the pool (1)': [21], 'pool was crowded (1)': [23]}}, 'staff (6)': {'Positive Comments': {'very awesome (1)': [6], 'friendliness and a willingness to accommodate guests (1)': [14], 'great staff (1)': [30], 'staff is friendly and eager to please (1)': [33]}, 'Negative Comments': {'staff was not friendly or helpful (1)': [18], 'staff always seem to act like they are doing you a favor (1)': [35]}}, 'location (6)': {'Positive Comments': {'great location (2)': [19, 33], 'convenient location (1)': [15], 'like location (1)': [23], 'good location on strip (1)': [29]}, 'Negative Comments': {'terrible location (1)': [22]}}, 'stay (5)': {'Positive Comments': {'fine for a family stay (1)': [5], 'stay was very nice (1)': [29]}, 'Negative Comments': {'stay was by far the worst (1)': [3], 'dirty and smelled like smoke (1)': [12], 'four night stay (1)': [25]}}, 'shower (5)': {'Positive Comments': {}, 'Negative Comments': {'ripped shower curtain (1)': [8], 'unable to shower (1)': [25], 'shower curtain (1)': [27], 'cold shower (1)': [27], 'worst shower head (1)': [35]}}, 'water (4)': {'Positive Comments': {}, 'Negative Comments': {'in room water - $25 per bottle (1)': [4], 'water shut off or no cold water (1)': [20], 'had no water (1)': [25], 'expensive (1)': [39]}}, 'fridge (4)': {'Positive Comments': {}, 'Negative Comments': {'no fridge (2)': [6, 8], 'not good at all (1)': [11], 'packed with overpriced useless items (1)': [12]}}, 'tv (4)': {'Positive Comments': {}, 'Negative Comments': {"horrible and don't work (1)": [6], 'tv worked part time (1)': [10], "wouldn't even play (1)": [13], "tv wasn't working (1)": [27]}}, 'furniture (4)': {'Positive Comments': {}, 'Negative Comments': {'as old as the mob movies filmed out here (1)': [6], 'aged and old furniture (1)': [8], 'old & beat up (1)': [16], 'furniture needs to be replaced (1)': [35]}}, 'casino (4)': {'Positive Comments': {'nice (1)': [16], 'nice size casino (1)': [33]}, 'Negative Comments': {'smelled of smoke (1)': [11], 'kind of dark (1)': [28]}}, 'lazy river (4)': {'Positive Comments': {'lazy river would have been fun (1)': [21], 'lots of fun (1)': [32], 'enjoy going in the water (1)': [34]}, 'Negative Comments': {'lazy river closed (1)': [17]}}, 'front desk (4)': {'Positive Comments': {}, 'Negative Comments': {'poor response from front desk (1)': [17], 'notified front desk (1)': [23], 'no help (1)': [24], 'front desk (1)': [27]}}, 'vegas (3)': {'Positive Comments': {'favorite vacations (1)': [1], 'when i come to vegas (1)': [10], 'in vegas (1)': [28]}, 'Negative Comments': {}}, 'resort (3)': {'Positive Comments': {'favorite vegas resort (1)': [33]}, 'Negative Comments': {'entire resort smells heavily of cigarette smoke and/or perfume (1)': [3], 'not friendly and does not care (1)': [39]}}, 'internet (3)': {'Positive Comments': {}, 'Negative Comments': {'internet horrible (1)': [5], 'need internet (1)': [13], 'slow and intermittent (1)': [39]}}, 'food (3)': {'Positive Comments': {'the food and restaurants were nice (1)': [5], 'good food (1)': [19], 'great choices for food (1)': [21]}, 'Negative Comments': {}}, 'monorail (3)': {'Positive Comments': {'did like (1)': [11], 'nice having the monorail (1)': [15]}, 'Negative Comments': {'super busy (1)': [7]}}, 'experience (3)': {'Positive Comments': {}, 'Negative Comments': {'just blaw (1)': [11], 'better experience (1)': [18], 'underwhelming experience (1)': [25]}}, 'restaurants (2)': {'Positive Comments': {'the best (1)': [2], 'great restaurants (1)': [33]}, 'Negative Comments': {}}, 'resort fee (2)': {'Positive Comments': {}, 'Negative Comments': {'resort fee - $33 (1)': [4], 'way too expensive (1)': [39]}}, 'gym (2)': {'Positive Comments': {}, 'Negative Comments': {'no gym (1)': [6], "gym doesn't open (1)": [27]}}, 'update (2)': {'Positive Comments': {}, 'Negative Comments': {'huge update and renovation (1)': [6], 'desperate need of un update (1)': [35]}}, 'housekeeping staff (2)': {'Positive Comments': {'courteous and goes beyond with great customer service (1)': [9], 'delivered their services efficiently (1)': [14]}, 'Negative Comments': {}}, 'bed (2)': {'Positive Comments': {}, 'Negative Comments': {'discomfort impacted (1)': [14], 'hard as a rock (1)': [31]}}, 'clean (2)': {'Positive Comments': {'consistently clean (1)': [14]}, 'Negative Comments': {'not very clean (1)': [22]}}, 'dining options (2)': {'Positive Comments': {'plenty of dining options (2)': [15, 29]}, 'Negative Comments': {}}, 'hot water (2)': {'Positive Comments': {}, 'Negative Comments': {'no hot water (1)': [17], "didn't have hot water (1)": [25]}}, 'reservation (2)': {'Positive Comments': {}, 'Negative Comments': {'cancelled reservation (1)': [17], 'booked and paid through the 30th (1)': [24]}}, 'app (2)': {'Positive Comments': {'super easy on the app (1)': [29]}, 'Negative Comments': {'booked through the 30th (1)': [24]}}, 'family (2)': {'Positive Comments': {'safe for everyone (1)': [34]}, 'Negative Comments': {'hard to pay that much money when you are innocent (1)': [37]}}, 'halloween (1)': {'Positive Comments': {'favorite vacations (1)': [1]}, 'Negative Comments': {}}, 'view (1)': {'Positive Comments': {'amazing view (1)': [1]}, 'Negative Comments': {}}, 'sunrise (1)': {'Positive Comments': {'amazing view (1)': [1]}, 'Negative Comments': {}}, 'employees (1)': {'Positive Comments': {'amazing employees (1)': [1]}, 'Negative Comments': {}}, 'steakhouse (1)': {'Positive Comments': {'amazing steakhouse (1)': [1]}, 'Negative Comments': {}}, 'dinner (1)': {'Positive Comments': {'amazing dinner (1)': [1]}, 'Negative Comments': {}}, 'wedding (1)': {'Positive Comments': {'amazing wedding (1)': [1]}, 'Negative Comments': {}}, 'come back (1)': {'Positive Comments': {"can't wait to come back (1)": [1]}, 'Negative Comments': {}}, 'strip (1)': {'Positive Comments': {'great walking location (1)': [2]}, 'Negative Comments': {}}, 'imho (1)': {'Positive Comments': {'the best (1)': [2]}, 'Negative Comments': {}}, 'clean hotel (1)': {'Positive Comments': {'very clean (1)': [2]}, 'Negative Comments': {}}, 'friendly staff (1)': {'Positive Comments': {'very friendly (1)': [2]}, 'Negative Comments': {}}, 'shows (1)': {'Positive Comments': {'great shows (1)': [2]}, 'Negative Comments': {}}, 'slot machines (1)': {'Positive Comments': {'lots of (1)': [2]}, 'Negative Comments': {}}, 'new york new york (1)': {'Positive Comments': {'great walking location (1)': [2]}, 'Negative Comments': {}}, 'excalibur (1)': {'Positive Comments': {'great walking location (1)': [2]}, 'Negative Comments': {}}, 'luxor (1)': {'Positive Comments': {'great walking location (1)': [2]}, 'Negative Comments': {}}, 'mandalay bay (1)': {'Positive Comments': {'great walking location (1)': [2]}, 'Negative Comments': {}}, 'monorail route (1)': {'Positive Comments': {'a good way to visit (1)': [2]}, 'Negative Comments': {}}, 'casinos (1)': {'Positive Comments': {'other casinos (1)': [2]}, 'Negative Comments': {}}, 'las vegas (1)': {'Positive Comments': {'when visiting (1)': [2]}, 'Negative Comments': {}}, 'dirty rooms (1)': {'Positive Comments': {}, 'Negative Comments': {'dirty rooms (1)': [3]}}, 'empty nut shells (1)': {'Positive Comments': {}, 'Negative Comments': {'empty nut shells (1)': [3]}}, 'bathtub (1)': {'Positive Comments': {}, 'Negative Comments': {'bathtub was full of hair and scum (1)': [3]}}, 'desk (1)': {'Positive Comments': {}, 'Negative Comments': {'no desk in room (1)': [5]}}, 'air quality (1)': {'Positive Comments': {}, 'Negative Comments': {'terrible air quality (1)': [4]}}, 'fees (1)': {'Positive Comments': {}, 'Negative Comments': {'small fees everywhere (1)': [4]}}, 'atm withdrawal fee (1)': {'Positive Comments': {}, 'Negative Comments': {'atm withdrawal fee - $9.99 (1)': [4]}}, 'infrastructure (1)': {'Positive Comments': {}, 'Negative Comments': {'everything is old in terms of infrastructure (1)': [4]}}, 'company (1)': {'Positive Comments': {}, 'Negative Comments': {'not for me to have my company there (1)': [5]}}, 'convention (1)': {'Positive Comments': {}, 'Negative Comments': {'for a convention like sema (1)': [5]}}, 'microwave (1)': {'Positive Comments': {}, 'Negative Comments': {'no microwave (1)': [6]}}, 'coffee (1)': {'Positive Comments': {}, 'Negative Comments': {'no coffee (1)': [6]}}, 'upkeep (1)': {'Positive Comments': {}, 'Negative Comments': {'not afford upkeep (1)': [6]}}, 'toilet paper (1)': {'Positive Comments': {}, 'Negative Comments': {'kinda thin (1)': [7]}}, 'place to sleep (1)': {'Positive Comments': {'good place to sleep (1)': [7]}, 'Negative Comments': {}}, 'table minimums (1)': {'Positive Comments': {}, 'Negative Comments': {'too high (1)': [7]}}, 'tiesto (1)': {'Positive Comments': {}, 'Negative Comments': {'gone (1)': [7]}}, 'sema convention (1)': {'Positive Comments': {}, 'Negative Comments': {'inflation (1)': [7]}}, 'fan (1)': {'Positive Comments': {}, 'Negative Comments': {'not a fan (1)': [7]}}, 'mgm room (1)': {'Positive Comments': {}, 'Negative Comments': {'huge let down (1)': [8]}}, 'dirty carpet (1)': {'Positive Comments': {}, 'Negative Comments': {'dirty carpet (1)': [8]}}, 'aged and old wallpaper (1)': {'Positive Comments': {}, 'Negative Comments': {'aged and old wallpaper (1)': [8]}}, 'chairs (1)': {'Positive Comments': {}, 'Negative Comments': {'dirty and torn chairs (1)': [8]}}, 'poor experience (1)': {'Positive Comments': {}, 'Negative Comments': {'poor experience (1)': [8]}}, 'luxuries (1)': {'Positive Comments': {}, 'Negative Comments': {'no luxuries (1)': [8]}}, 'motel (1)': {'Positive Comments': {}, 'Negative Comments': {'feeling like a motel (1)': [8]}}, 'front desk clerk (1)': {'Positive Comments': {'courteous and goes beyond with great customer service (1)': [9]}, 'Negative Comments': {}}, 'monorail station (1)': {'Positive Comments': {'convenient to explore the strip (1)': [9]}, 'Negative Comments': {}}, 'non-smoking areas (1)': {'Positive Comments': {}, 'Negative Comments': {'wish there were more (1)': [9]}}, 'gambling (1)': {'Positive Comments': {'spend a lot on gambling (1)': [10]}, 'Negative Comments': {}}, 'bathroom sink (1)': {'Positive Comments': {}, 'Negative Comments': {'not attached, bounced around (1)': [11]}}, 'items (1)': {'Positive Comments': {}, 'Negative Comments': {'overpriced useless items (1)': [12]}}, 'sensors (1)': {'Positive Comments': {}, 'Negative Comments': {'shifted from their sensors (1)': [12]}}, 'alternative (1)': {'Positive Comments': {'consider an alternative (1)': [13]}, 'Negative Comments': {}}, 'connection (1)': {'Positive Comments': {}, 'Negative Comments': {'reliable connection (1)': [13]}}, 'buffering (1)': {'Positive Comments': {}, 'Negative Comments': {'without buffering (1)': [13]}}, 'dial up (1)': {'Positive Comments': {}, 'Negative Comments': {"90's dial up (1)": [13]}}, 'lighting (1)': {'Positive Comments': {}, 'Negative Comments': {'consistently dim (1)': [14]}}, 'sleep (1)': {'Positive Comments': {}, 'Negative Comments': {'quality of my sleep significantly (1)': [14]}}, 'mattress (1)': {'Positive Comments': {}, 'Negative Comments': {'well-worn (1)': [14]}}, 'blanket (1)': {'Positive Comments': {}, 'Negative Comments': {'thin blanket (1)': [14]}}, 'sheet (1)': {'Positive Comments': {}, 'Negative Comments': {'only a thin blanket and sheet (1)': [14]}}, 'pillows (1)': {'Positive Comments': {}, 'Negative Comments': {'subpar (1)': [14]}}, 'support (1)': {'Positive Comments': {}, 'Negative Comments': {'minimal support (1)': [14]}}, 'back (1)': {'Positive Comments': {}, 'Negative Comments': {'sore back (1)': [14]}}, 'amenities (1)': {'Positive Comments': {'satisfactory (1)': [14]}, 'Negative Comments': {}}, 'bathroom (1)': {'Positive Comments': {'well-maintained (1)': [14]}, 'Negative Comments': {}}, 'merits (1)': {'Positive Comments': {'certain merits (1)': [14]}, 'Negative Comments': {}}, 'comfort (1)': {'Positive Comments': {'enhance the comfort (1)': [14]}, 'Negative Comments': {}}, 'quality (1)': {'Positive Comments': {'enhance the quality (1)': [14]}, 'Negative Comments': {}}, 'beds (1)': {'Positive Comments': {'extremely comfortable (1)': [15]}, 'Negative Comments': {}}, 'hotel maintenance (1)': {'Positive Comments': {'kept immaculate and looks like new (1)': [15]}, 'Negative Comments': {}}, 'master bathroom shower (1)': {'Positive Comments': {}, 'Negative Comments': {'handle was broke and kept falling off (1)': [16]}}, 'water temperature (1)': {'Positive Comments': {}, 'Negative Comments': {'either ice cold or scorching hot (1)': [16]}}, 'other casinos (1)': {'Positive Comments': {'a lot more to offer (1)': [16]}, 'Negative Comments': {}}, 'zion (1)': {'Positive Comments': {}, 'Negative Comments': {'changed plans (1)': [17]}}, 'kids (1)': {'Positive Comments': {}, 'Negative Comments': {'major disappointment for the kids (1)': [17]}}, 'vegas pool (1)': {'Positive Comments': {}, 'Negative Comments': {'no vibe at all (1)': [17]}}, 'water shutoff (1)': {'Positive Comments': {}, 'Negative Comments': {'no water at all (1)': [17]}}, 'loud noise (1)': {'Positive Comments': {}, 'Negative Comments': {'loud noise at 2:30am (1)': [17]}}, 'checkout (1)': {'Positive Comments': {}, 'Negative Comments': {'no compensation for issues (1)': [17]}}, 'hotel stays (1)': {'Positive Comments': {}, 'Negative Comments': {'worst hotel stay (1)': [17]}}, 'response and service (1)': {'Positive Comments': {}, 'Negative Comments': {'disappointing response from staff (1)': [17]}}, 'management (1)': {'Positive Comments': {}, 'Negative Comments': {'reach out to management (1)': [17]}}, 'non-mgm properties (1)': {'Positive Comments': {}, 'Negative Comments': {'searching for other options (1)': [17]}}, 'resort fees (1)': {'Positive Comments': {}, 'Negative Comments': {'double charged resort fees (1)': [18]}}, 'hidden fees (1)': {'Positive Comments': {}, 'Negative Comments': {'hidden fees (1)': [18]}}, 'mgm hotel (1)': {'Positive Comments': {}, 'Negative Comments': {'book at mgm over another hotel (1)': [18]}}, 'business (1)': {'Positive Comments': {'give my business to another company (1)': [18]}, 'Negative Comments': {}}, 'price (1)': {'Positive Comments': {}, 'Negative Comments': {'higher price (1)': [18]}}, 'nightlife (1)': {'Positive Comments': {'great nightlife (1)': [19]}, 'Negative Comments': {}}, 'atmosphere (1)': {'Positive Comments': {'friendly atmosphere (1)': [19]}, 'Negative Comments': {}}, 'window shade (1)': {'Positive Comments': {}, 'Negative Comments': {'window shade broken (1)': [20]}}, 'advance notice (1)': {'Positive Comments': {}, 'Negative Comments': {'no advance notice (1)': [20]}}, 'checkin (1)': {'Positive Comments': {}, 'Negative Comments': {'no notice at checkin (1)': [20]}}, 'trip (1)': {'Positive Comments': {'good trip (1)': [21]}, 'Negative Comments': {}}, 'starbucks (1)': {'Positive Comments': {'plus starbucks (1)': [21]}, 'Negative Comments': {}}, 'noise (1)': {'Positive Comments': {}, 'Negative Comments': {'heard everyone walking down the hall all night (1)': [22]}}, 'ac unit (1)': {'Positive Comments': {}, 'Negative Comments': {'buzzing sound of the ac unit kept us up (1)': [22]}}, 'drink (1)': {'Positive Comments': {}, 'Negative Comments': {'never got a drink (1)': [23]}}, 'bathtub drain (1)': {'Positive Comments': {}, 'Negative Comments': {'bathtub drain was clogged (1)': [23]}}, 'tap restaurant (1)': {'Positive Comments': {'tap restaurant was good (1)': [23]}, 'Negative Comments': {}}, 'running water (1)': {'Positive Comments': {}, 'Negative Comments': {'avoid if you like running water (1)': [25]}}, 'night (1)': {'Positive Comments': {}, 'Negative Comments': {'last night (1)': [25]}}, 'mornings (1)': {'Positive Comments': {}, 'Negative Comments': {'two mornings (1)': [25]}}, 'maid service (1)': {'Positive Comments': {}, 'Negative Comments': {'maid service came only once (1)': [25]}}, 'four days (1)': {'Positive Comments': {}, 'Negative Comments': {'four days (1)': [25]}}, 'half ass job (1)': {'Positive Comments': {}, 'Negative Comments': {'half ass job (1)': [25]}}, 'wet towel (1)': {'Positive Comments': {}, 'Negative Comments': {'wet towel on our bed (1)': [25]}}, 'charming (1)': {'Positive Comments': {'how charming (1)': [25]}, 'Negative Comments': {}}, 'staying (1)': {'Positive Comments': {}, 'Negative Comments': {'not being staying (1)': [25]}}, 'old dominion concert (1)': {'Positive Comments': {'fantastic (1)': [26]}, 'Negative Comments': {}}, 'host (1)': {'Positive Comments': {'super nice host (1)': [26]}, 'Negative Comments': {}}, 'seats (1)': {'Positive Comments': {'better seats (1)': [26]}, 'Negative Comments': {}}, 'band (1)': {'Positive Comments': {'special band (1)': [26]}, 'Negative Comments': {}}, 'trash (1)': {'Positive Comments': {}, 'Negative Comments': {'trash outside (1)': [27]}}, 'hair strands (1)': {'Positive Comments': {}, 'Negative Comments': {'long hair strands (1)': [27]}}, 'breakfast option (1)': {'Positive Comments': {}, 'Negative Comments': {'sit down breakfast option (1)': [27]}}, 'age (1)': {'Positive Comments': {}, 'Negative Comments': {'showing signs of age (1)': [28]}}, 'conference (1)': {'Positive Comments': {'for a conference (1)': [28]}, 'Negative Comments': {}}, 'services (1)': {'Positive Comments': {'services available (1)': [28]}, 'Negative Comments': {}}, 'onsite (1)': {'Positive Comments': {'available onsite (1)': [28]}, 'Negative Comments': {}}, 'modern properties (1)': {'Positive Comments': {'more modern properties (1)': [28]}, 'Negative Comments': {}}, 'brightly colored (1)': {'Positive Comments': {'all brightly colored (1)': [28]}, 'Negative Comments': {}}, 'lit (1)': {'Positive Comments': {'all brightly colored and lit (1)': [28]}, 'Negative Comments': {}}, 'check-in/out (1)': {'Positive Comments': {'check-in/out was super easy (1)': [29]}, 'Negative Comments': {}}, 'recommend (1)': {'Positive Comments': {'recommend staying here (1)': [29]}, 'Negative Comments': {}}, 'price tag (1)': {'Positive Comments': {}, 'Negative Comments': {'not great (1)': [30]}}, 'disability room (1)': {'Positive Comments': {}, 'Negative Comments': {'terrible odor (1)': [30]}}, 'wear and tear (1)': {'Positive Comments': {}, 'Negative Comments': {'wear and tear is setting in (1)': [30]}}, 'mobility issues (1)': {'Positive Comments': {}, 'Negative Comments': {'massive for people with mobility issues (1)': [30]}}, 'stay well room (1)': {'Positive Comments': {}, 'Negative Comments': {'scam (1)': [31]}}, 'in room purifier (1)': {'Positive Comments': {}, 'Negative Comments': {'nothing more than a fan (1)': [31]}}, 'wifi (1)': {'Positive Comments': {}, 'Negative Comments': {'never working (1)': [32]}}, 'electrical outlet (1)': {'Positive Comments': {}, 'Negative Comments': {'only one worked (1)': [32]}}, 'phone (1)': {'Positive Comments': {}, 'Negative Comments': {'covered in dust (1)': [32]}}, 'nightstand (1)': {'Positive Comments': {}, 'Negative Comments': {'found old liquor bottle (1)': [32]}}, 'cleaning (1)': {'Positive Comments': {}, 'Negative Comments': {'poor reviews on cleaning (1)': [32]}}, 'crowd (1)': {'Positive Comments': {'fun crowd (1)': [32]}, 'Negative Comments': {}}, 'customer service (1)': {'Positive Comments': {}, 'Negative Comments': {'not as high end customer service (1)': [32]}}, 'hotels (1)': {'Positive Comments': {'other higher end hotels (1)': [32]}, 'Negative Comments': {}}, 'tram (1)': {'Positive Comments': {'convenient access to the tram (1)': [33]}, 'Negative Comments': {}}, 'mattresses (1)': {'Positive Comments': {}, 'Negative Comments': {'abysmal mattresses (1)': [35]}}, 'service (1)': {'Positive Comments': {}, 'Negative Comments': {'waited at the whiskey bar for over 15 minutes without service (1)': [35]}}, 'waitresses (1)': {'Positive Comments': {}, 'Negative Comments': {'3 waitresses (1)': [35]}}, 'bar (1)': {'Positive Comments': {'fantastic 1923 bar (1)': [35]}, 'Negative Comments': {}}, 'gold lounge (1)': {'Positive Comments': {}, 'Negative Comments': {"gold lounge doesn't even have coffee (1)": [35]}}, 'injured (1)': {'Positive Comments': {}, 'Negative Comments': {'get injured (1)': [36]}}, 'waiver (1)': {'Positive Comments': {}, 'Negative Comments': {'sign a waiver (1)': [36]}}, 'slots (1)': {'Positive Comments': {}, 'Negative Comments': {'one of the slots (1)': [36]}}, 'foot board (1)': {'Positive Comments': {}, 'Negative Comments': {'foot board came loose (1)': [36]}}, 'leg (1)': {'Positive Comments': {}, 'Negative Comments': {'cut his leg (1)': [36]}}, 'accident report (1)': {'Positive Comments': {}, 'Negative Comments': {'fill out an accident report (1)': [36]}}, 'machine (1)': {'Positive Comments': {}, 'Negative Comments': {'machine where it was broke (1)': [36]}}, 'next time (1)': {'Positive Comments': {}, 'Negative Comments': {'next time (1)': [36]}}, 'free nights (1)': {'Positive Comments': {'2 nights free (1)': [36]}, 'Negative Comments': {}}, 'high rollers (1)': {'Positive Comments': {}, 'Negative Comments': {'catering to the high rollers (1)': [36]}}, 'guests (1)': {'Positive Comments': {'caring about all of your guests (1)': [36]}, 'Negative Comments': {}}, 'error (1)': {'Positive Comments': {}, 'Negative Comments': {'make up for your error (1)': [36]}}, 'air (1)': {'Positive Comments': {}, 'Negative Comments': {'pay for our own air (1)': [36]}}, 'parking (1)': {'Positive Comments': {}, 'Negative Comments': {'pay for our own parking (1)': [36]}}, 'dirty (1)': {'Positive Comments': {}, 'Negative Comments': {'that’s dirty (1)': [36]}}, 'manager (1)': {'Positive Comments': {}, 'Negative Comments': {'refused to remove the charge (1)': [37]}}, 'smokers (1)': {'Positive Comments': {}, 'Negative Comments': {'never been smokers (1)': [37]}}, 'drugs (1)': {'Positive Comments': {}, 'Negative Comments': {'never used drugs (1)': [37]}}, 'communication (1)': {'Positive Comments': {}, 'Negative Comments': {'poor communication (1)': [38]}}, 'internet service (1)': {'Positive Comments': {}, 'Negative Comments': {'horrible internet service (1)': [38]}}, 'mini bar (1)': {'Positive Comments': {}, 'Negative Comments': {'expensive mini bar (1)': [38]}}, 'house keeper (1)': {'Positive Comments': {'efficient house keeper (1)': [38]}, 'Negative Comments': {}}, 'room rate (1)': {'Positive Comments': {}, 'Negative Comments': {'expensive (1)': [39]}}, 'music (1)': {'Positive Comments': {}, 'Negative Comments': {'uncomfortable and annoying (1)': [39]}}};
        const content_data = [{1: 'date: October 2023 | user: triciaburda | \n\nWent to Vegas for Halloween\nWent to Vegas for Halloween and got married. It was one of my favorite vacations. The view was amazing, we got to watch the sunrise everyday. The employees at the steakhouse were amazing. We had our dinner there after our wedding. I can’t wait to come back.\n\n'}, {2: "date: August 2022 | user: Ron K | \n\nMGM Grand is the best Hotel on the strip IMHO\nMGM is very clean hotel with very friendly staff, the best restaurants, great shows, lots of slot machines, great walking location to New York New York, Excalibur, Luxor, and Mandalay Bay. My wife and I love the easy walk and experience through the shops and casinos to all the aforementioned hotels. It is also a stop on the Monorail route, which is a good way to visit other casinos on the strip. We've stayed at other hotels but MGM Grand is now the only place we stay when visiting Las Vegas.\n\n"}, {3: 'date: October 2023 | user: jeremya842023 | \n\nDirty rooms\nThe room had empty nut shells on the floor and the bathtub was full of hair and scum. I let it go the first night and politely informed housekeeping the next day instead of calling the desk and getting someone in trouble. Then after returning to my room after cleaning services the second day the bathtub was still disgusting and there were still empty nut shells on the floor. Also the entire resort smells heavily of cigarette smoke and/or perfume to try and cover the smell. I have stayed in other resorts in Las Vegas as I am there every year at this time and this stay was by far the worst that I have ever had.\n\n'}, {4: 'date: November 2023 | user: alY4645OQ | \n\nTerrible air quality, small fees everywhere\nIn room water - $25 per bottle.\nATM withdrawal fee - $9.99\nResort fee - $33\nAir quality--crap.\nJust charging for everything, on top of $300 a night (special business rate). Everything is old in terms of infrastructure.\n\n'}, {5: 'date: October 2023 | user: jmcqueen990 | \n\nDecent property just not during business week\nNo desk in room to check emails. Internet horrible. Fine for a family stay in Vegas, just not for me to have my company there during the week for a convention like SEMA. The food and restaurants were nice.\n\n'}, {6: "date: November 2023 | user: Asamo B | \n\nDo Not Stay Here\nthe staff was very awesome but to charge money and put a guest in room 22nd floor 222 is a criminal charge no fridge no microwave no coffee no pool no gym after 6 is stupid the tv is horrible and don't work the hotel makes too much money to not afford upkeep on tv the furniture is as old as the mob movies filmed out here so sad they need to be shut down and re opened after a huge update and renovation.\n\n"}, {7: 'date: October 2023 | user: Csinh301 | \n\n5 star\nRooms are clean, toilet paper kinda thin, room temps ok, view ok, good place to sleep. Thumbs up.Table minimums were too high. Windows green. Tiesto gone. Sad. Sema convention inflation. Not a fan. Monorail super busy.\n\n'}, {8: "date: November 2023 | user: marktB2974UB | \n\nMGM Room fail\nRoom was a huge let down..dirty carpet, aged and old wallpaper and furniture. 3 chairs, 2 dirty and 1 torn up and ripped. The shower curtail was ripped up. Ther is no fridge to use, no microwave(that's OK, but no fridge??? Really??) Just a poor experience. When you go on a trip, you look forward to resting in some luxurys..this had me feeling like I was in a motel.\n\n"}, {9: 'date: October 2023 | user: aroach815 | \n\nMGM GRAND SERVICE/STAFF TOP NOTCH\nFront desk clerk and housekeeping staff always courteous and goes beyond with great customer service! MGM has a monorail station which makes it so convenient to explore the strip! I wish there were more non-smoking areas for the casino floor.\n\n'}, {10: 'date: November 2023 | user: mikeO751YQ | \n\nIt was OK\nPlace was great, the room was not. TV worked part time and we were put in the worst room in the place. When I come to Vegas I spend a lot on gambling and expect a great room. I’ll be back but next time will insist on better room\n\n'}, {11: "date: October 2023 | user: andyC2624ZE | \n\nJust Fair\nThe hotel felt old, smoke eaters in the casino were not effective - By the time I walked from desk to my room - my clothes smelled of smoke. Bathroom sink was not attached and bounced around when you used it. I have traveled all my business career - experience was just blaw - and if I can't put anything in the fridge of my own leftovers from your restaurants without a charge - just not good at all. I did like you were on the monorail. .\n\n"}, {12: 'date: November 2023 | user: mannyc1172023 | \n\nAverage stay at best\nWe came on a package to see the usher concert. It was a two day stay so we werent in the room for long periods of time. Room was dirty and smelled like smoke. The fridge was packed with overpriced useless items that i ended up being charged for because they shifted from their sensors\n\n'}, {13: 'date: November 2023 | user: jeffhansen10 | \n\nIf you need internet, consider an alternative\nThe property is what you would expect from a casino unless you have a need for an internet connection. If it important to you or your stay, consider an alternative to this location. If that’s not possible, make sure to confirm your room has reliable connection. The TV wouldn’t even play without buffering. 90’s dial up was faster (when you could actually connect)\n\n'}, {14: "date: November 2023 | user: DruWright666 | \n\nJust Okay\nMy recent stay at the MGM Grand left me with a mix of impressions. The hotel's location, while not exceptional, was decent, and the staff demonstrated friendliness and a willingness to accommodate guests, leaving an overall satisfactory impression. However, my experience was marred by several disappointments related to the room.\n\nThe most significant issue was the room's darkness. Despite multiple light fixtures, the lighting was consistently dim, making it challenging to comfortably use the room. This deficiency was particularly frustrating during the day when proper lighting should be a given.\n\nThe bed was another letdown. Its discomfort impacted the quality of my sleep significantly. The mattress appeared well-worn,\nand with only a thin blanket and sheet, I often felt cold during the night. The pillows, too, were subpar, offering minimal support and resulting in waking up with a sore back each morning.\n\nOn a more positive note, the room was consistently clean, and the amenities provided were satisfactory. The bathroom was well-maintained, and the housekeeping staff delivered their services efficiently.\n\nWhile the MGM possessed certain merits, the persistent issues with the room's darkness and the uncomfortable bed overshadowed the positive aspects of my stay. I sincerely hope that the hotel takes measures to address these concerns in the future to enhance the comfort and quality of their rooms.\n\n"}, {15: 'date: October 2023 | user: Tour813888 | \n\nExcellent Hotel, Convenient Location\nI was there for a convention. Rooms were clean and the beds were extremely comfortable. Nice having the monorail right there too. Plenty of dining options and certainly plenty to do. The hotel is kept immaculate and looks like new.\n\n'}, {16: 'date: October 2023 | user: treyeliteauto | \n\nOur stay\nRooms were over priced for the condition. Furniture was old & beat up. Master bathroom shower the handle was broke and kept falling off. The water temperature was either ice cold or scorching hot. The casino was nice but other casinos have a lot more to offer.\n\n'}, {17: 'date: November 2023 | user: ANuminousOne | \n\nIssues aplenty, poor response from most staff. Find somewhere else to stay on the strip.\nWhere to start? I originally had a reservation in another property and cancelled to stay at the MGM Grand specifically because of its pools and lazy river. Bad move on my part.\n\n1) No hot water first day of our stay. Cold shower isn’t a great start.\n2) Changed plans and instead of going to Zion, we opted to stay near the hotel specifically to go to pools and lazy river (reason we chose MGM). Found all but 1 pool closed. No notification when we booked. Major disappointment for the kids. As an aside, I e never seen a Vegas pool with less vibe. 77° out, perfect pool weather, tons of people out crowded around the one pool. No music. No beverage service. No vibe at all.\n3) Went back to room to clean up before we made new plans. Now hot water wasn’t a problem because this time we had no water at all. Was told that I should have been notified about a water shutoff. Wasn’t notified about that either.\n4) Woken up at 2:30AM by a loud noise (sounded like a water pipe pressure issue to me), called front desk and was told another guest had complained about a “drilling sound” and they would send security to investigate. Noise finally stopped at 3:03AM.\n5) Noise returned around 3:30AM and continued after I mercifully fell asleep around 4AM.\n6) Spoke with a really nice person at the front desk on checkout. All that was offered though was to remove the $39 “resort fee”, kind but IMO hardly representative of all the issues we had.\n\nWhile not the end of the world, this was by far one of the worst hotel stays I’ve ever had. Issues happen, I get it. But when there are many other options for hotels, response and service is key. Vegas is all about catering to the guest. It’s was the response of most of the hotel staff (or lack thereof) that was so disappointing. I am going to try to reach out to management on Monday to give them the chance to make this right, but there are lots of other non-MGM properties in the strip. As of now, I’ll be searching out other options.\n\n'}, {18: 'date: November 2023 | user: Cruiser376758840199 | \n\nDouble charged resort fees, staff was not friendly or helpful\nDouble charged resort fees, staff was not friendly or helpful. I would consider hidden fees when planning to book at MGM over another hotel. At this point I do not think I will stay at another MGM hotel and I would be happy to give my business to another company that provides a better experience even if it comes at a higher price.\n\n'}, {19: 'date: October 2023 | user: l0rdphilc | \n\nAlways a great place to stay\nI have stayed at this property 15+ times, usually for 4-6 days.\n\nThe property never disappoints. Great nightlife, good food, friendly, atmosphere, and great location.\n\nI always stay at MGM properties in Las Vegas, MGM. Grand has been one of my staples.\n\n'}, {20: 'date: October 2023 | user: Greg P | \n\nBroken and dated.\nRoom had a number of issues that weren’t resolved. Room was dark, window shade broken. Water shut off or no cold water at times all the days of our stay. No advance notice. No notice at checkin that this was scheduled.\n\n'}, {21: 'date: October 2023 | user: r8rbrat72 | \n\nGood trip\nWe had never stayed here and it was just what we needed. I was bummed we didn’t make it to the pool. Lazy river would have been fun. Next time. Great choices for food and plus Starbucks. 3 of them that we saw!\n\n'}, {22: 'date: November 2023 | user: thatboyck | \n\nDated and Small Rooms\nThe room was dated, small, not very clean and in a terrible location. We heard everyone walking down the hall all night and the buzzing sound of the AC unit kept us up as well. This place needs a major make over.\n\n'}, {23: 'date: October 2023 | user: madrdh | \n\nJust OK\nLike location. Pool was in Winter mode. So only 2 pools open. That made pools crowded. Never got a drink while gambling. Bathtub drain was clogged, notified front desk 3x. Was never fixed. Tap restaurant was good.\n\n'}, {24: 'date: October 2023 | user: 890jerry | \n\nFront Desk no Help\nI was clearly in app. booked through the 30th. Front desk says was booked to 29th. Showed them 20 times app and reservation says thru 30th. They charged me another night, although I was clearly booked and paid through the 30th and said there is nothing they can do about it. MGM reservations is a different entity from MGM front desk.\n\nExpalin that BS\n\n'}, {25: 'date: November 2023 | user: Aaron | \n\nAvoid if you like running water\nOn our last night of a four night stay in one of the upgraded king spa suites.\n\nThree of four nights we didn’t have hot water. Two mornings we had no water in the room at all. Being hungover and unable to shower when you’re paying $300 a night for a room is a insane. Not sure it’s even legal to rent rooms without running water. Some third world sh*t.\n\nMaid service came ONLY ONCE in our four days. She did a half ass job and left a wet towel on our bed. How charming.\n\nOverall an underwhelming experience, to say the least. Will not being staying again.\n\n'}, {26: 'date: October 2023 | user: RKPeterson | \n\nRewards trip for Old Dominion concert\nWe had a great time! The Old Dominion concert was fantastic! Super nice host there helped give us better seats than we were randomly assigned. That is a special band for us, so it was greatly appreciated!\n\n'}, {27: 'date: November 2023 | user: Todd B | \n\nHorrible in many aspects.\nA rare review from me but wow…this place is bad. Really bad. It starts with the room. Trash outside the door from my 7pm check in and still there in the AM. Not cleaned well with long hair strands clearly visible. Then it has a shower curtain (not a complaint but shows how long since the room has been updated). Gym doesn’t open until 7am nor does the only sit down breakfast option which then has a line out the door at 7:01. TV wasn’t working and I asked the front desk to send someone. Never happened during my 3 night stay. And finally a cold shower my last morning. Never again.\n\n'}, {28: 'date: October 2023 | user: michaelafreed | \n\nA classic property but showing signs of age\nThis is a huge property. I was in Vegas for 6 days for a conference and was actually able to spend 2 entire days without leaving the property due to all the services available onsite there. Some areas are showing signs of age and I feel like the casino is kind of dark and maybe a bit dingy compared to more modern properties that are all brightly colored and lit.\n\n'}, {29: 'date: October 2023 | user: ckeller823 | \n\nWould Recommend\nOverall stay was very nice. Rooms were clean and check-in/out was super easy on the app. Plenty of dining options and good location on strip. I would stay again in the future and recommend staying here.\n\n'}, {30: "date: October 2023 | user: Trail12481951069 | \n\nGreat staff though, but the rooms were not great for that price tag at all.\nThe staff was ultra hepful and deserves a 5 star. The disability room we were in had a terrible odor. In both rooms that we stayed, you could see that wear and tear is setting in. It's too massive for people with mobility issues.\n\n"}, {31: 'date: October 2023 | user: r0bbiev13 | \n\nStay well scam\nThe stay well room was a scam. Rooms were dated smelled like cigarettes and rust. Bed was hard as a rock, the “in room purifier” was nothing more than a fan.\nI won’t stay at any hotel on the strip going forward regardless of price\n\n'}, {32: 'date: November 2023 | user: living_the_dream12 | \n\nPleasantly surprised\nI have been to Vegas too many times to count, but this was the first time to MGM Grand. I heard some reviews making it sound concerning in comparison to our usual favorites but it was actually pleasantly surprising.\n\nThe negatives:\n- wifi was never working in our room\n-only one electrical outlet in the entire room worked even after trying to reset them so to charge any electronics you had to rotate through plugging them in.\n-The phone was covered in a thick layer of dust and we dropped something on the ground and looked under the nightstand to look for it and found someone’s old liquor bottle under there. But overall clean except for those two things as I did see some poor reviews on the cleaning.\n\nOverall the hotel was clean and a fun crowd. The lazy river at the pool was lots of fun. Lots of restaurants to choose from, but not as high end customer service in the resort overall as some of the other higher end hotels.\n\n'}, {33: 'date: October 2023 | user: MMD-on-the-go | \n\nAlways Completely Satisfied With MGM Grand\nThis was the third time we stayed at MGM Grand. Great rooms, restaurants and pools. Nice size casino, great location. Convenient access to the tram. Staff is friendly and eager to please. Has become our favorite Vegas resort.\n\n'}, {34: 'date: October 2023 | user: aztecblue2 | \n\nGreat stay\nMgm is a great resort and provided all the services we needed. The room provided enough space for my family and was safe for everyone. The lazy river was great because my daughter enjoys going in the water. Great hotel.\n\n'}, {35: "date: October 2023 | user: fdipace | \n\nAbysmal mattresses and dark outdated room\nThe hotel rooms are in desperate need of un update. The mattresses are horrible. The room itself was dark even with all the lights on and the furniture needs to be replaced. The staff always seem to act like they are doing you a favor. The shower head was one of the worst I've ever experienced at a hotel. As for service, we waited at the Whiskey bar for over 15 minutes without service even though there were 3 waitresses. We left and went to the 1923 bar which was fantastic. It is in the walkway between the Luxor and the Mandalay Bay. Also the Gold lounge doesn't even have coffee.\n\n"}, {36: 'date: October 2023 | user: Cheryl B | \n\nClean hotel but if you get injured, plan on having to sign a waiver\nThe hotel itself is STUNNING AND CLEAN! The pool was heated and nice! Drinks are pricey but that’s anywhere in Vegas. My fiancé got injured on one of the slots where the foot board came loose and cut his leg. Security came and gave him a bandaid, and made him fill out an accident report, but they DIDNT FIX THE machine where it was broke, so it’s likely to happen to someone else who may get way more injured next time! They offered us 2 nights free to make it up next time we’re in Vegas. But limited the days we could come, told us we had to pay for our own air and parking, and that’s it! MGM… you can do better! Stop just catering to the high rollers and start caring about ALL of your guests! If you’re going to offer two free nights to make up for your error, do it right! Then they wanted him to sign a waiver to not talk about what happened, which we refused! That’s dirty!\n\n'}, {37: 'date: October 2023 | user: 777jake123 | \n\nDo not stay at MGM Grand\nCharged $500 in room smoking penalty. Nobody in our family has ever smoked. Manager said everyone says that and refused to remove the charge. Hard to pay that much money when you are innocent. We were in Las Vegas for my 12 year olds baseball tournament with my 80 year old mother. Never been smokers or ever used drugs.\n\n'}, {38: 'date: October 2023 | user: kimmarshall117 | \n\nPoor communication\nThey checked us into a dirty room and internet service was horrible. Only mini bar in room with expensive dinners should have refrigerator in rooms. Our saving grace was a very efficient house keeper that had our room ready within an hour\n\n'}, {39: 'date: October 2023 | user: Romtiger | \n\nMGM - not as famous\nWay too expensive hotel for what it offers. They charge a room rate, a room rate tax and a daily resort fee of $ 40 and they charge a resort fee tax also, so, you pay $46 more of the advertised room rate every day you stay here. And you cannot avoid the resort fee.\nOne bottle of water on the top of the room refrigerator( we thought is complimentary, but was not) is $ 22. Yes, $ 22 for one bottle of water. The internet advertised to be hi speed, is just a joke , is slow and intermittent.\nFriday night until 11:30 pm -12:00 am you can’t sleep or rest if you want. A crazy music from some club near to the hotel, ( or maybe from inside the hotel) makes your rest uncomfortable and annoying, especially if you have to get up early next morning to go to the airport.\nSo, all over, we were not satisfied with this resort . Is not friendly and does not care of clients satisfaction.\n\n'}, {40: 'date: nan | user: nan | \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n'}];

const personList = document.getElementById('person-list');
const groupAList = document.getElementById('groupA-list');
const groupBList = document.getElementById('groupB-list');
const contentList = document.getElementById('content-list');


document.addEventListener('DOMContentLoaded', function() {
    Object.entries(tree_data).forEach(([personName, personData], index) => {
        const li = document.createElement('li');
        li.textContent = personName;
        li.addEventListener('click', function() {
            selectPerson(index, li);  // pass the clicked element
        });
        personList.appendChild(li);
    });

    selectPerson(0, personList.querySelector('li'));
});


let selectedPerson = null; 

function selectPerson(index) {
    const previouslySelected = document.querySelector('#person-list .active');
    if (previouslySelected) {
        previouslySelected.classList.remove('active');
    }
    selectedPerson = personList.querySelectorAll('li')[index].textContent;
    document.querySelectorAll('#person-list li')[index].classList.add('active');

    const personName = document.querySelectorAll('#person-list li')[index].textContent;

    displayGroups(personName);
}


function displayContent(groupName, itemName) {
    contentList.innerHTML = '';

    if (event && event.target) {
        groupAList.querySelectorAll('li').forEach(item => item.style.backgroundColor = '');
        groupBList.querySelectorAll('li').forEach(item => item.style.backgroundColor = '');

        event.target.style.backgroundColor = 'lightgray';
    } else {
        console.error("No valid event detected in displayContent");
        return; 
    }

    const contentKeys = tree_data[selectedPerson][groupName][itemName] || [];

    for (let key of contentKeys) {
        let contentItem = content_data.find(cd => cd[key]);
        if (contentItem) {
            let li = document.createElement('li');
            li.classList.add('content-item'); 
            li.innerHTML = checkAndHighlightSentence(selectedPerson, itemName, groupName, contentItem[key]);
            contentList.appendChild(li);

// 
    let highlightedPart = document.getElementById('highlightedPart');
    if (highlightedPart) {
        highlightedPart.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
//
    }
    }

}

function selectItem(groupName, itemNumbers) {
    populateContents(itemNumbers);

}


function displayGroups(person) {

    const personData = tree_data[person];
    
    if (!personData) {
        console.error("No data found for person:", person);
        return;
    }

    groupAList.innerHTML = '';
    groupBList.innerHTML = '';

    const groupAItems = personData['Positive Comments'];
    const groupBItems = personData['Negative Comments'];

    for (let itemName in groupAItems) {
        const liA = document.createElement('li');
        liA.textContent = itemName;
        liA.addEventListener('click', function() {
            displayContent('Positive Comments', itemName);
        });
        groupAList.appendChild(liA);
    }

    for (let itemName in groupBItems) {
        const liB = document.createElement('li');
        liB.textContent = itemName;
        liB.addEventListener('click', function() {
            displayContent('Negative Comments', itemName);
        });
        groupBList.appendChild(liB);
    }
}

function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); 
}


function checkAndHighlightSentence(person, itemName, groupName, sentence) {
    if (groupName === 'Positive Comments') {
            const person0 = `${person}`;
            const list1 = person0.split("(");
            let person1 = list1[0].trim();

            const phrase0 = `${itemName}`;
            const list2 = itemName.split("(");
            let phrase = list2[0].trim();
     
            const cur_phrase = processTextWithMultiWordPhraseCaseInsensitiveAndConditionChecking(phrase, person1);
            const matched_sent = findSentencesContainingWords(sentence, cur_phrase) ;

            let replacedSentence = matched_sent.reduce((currentSentence, match) => {
              const escapedMatch = escapeRegExp(match);
              const highlight = `<span id="highlightedPart"; style="background-color: lime">${match}</span>`;
              const regex = new RegExp(escapedMatch, 'g');
              return currentSentence.replace(regex, highlight);
            }, sentence);
            return replacedSentence


    } else {

            const person0 = `${person}`;
            const list1 = person0.split("(");
            let person1 = list1[0].trim();

            const phrase0 = `${itemName}`;
            const list2 = itemName.split("(");
            let phrase = list2[0].trim();
     
            const cur_phrase = processTextWithMultiWordPhraseCaseInsensitiveAndConditionChecking(phrase, person1);

            const matched_sent = findSentencesContainingWords(sentence, cur_phrase) ;

            let replacedSentence = matched_sent.reduce((currentSentence, match) => {
              const escapedMatch = escapeRegExp(match);
//              const highlight = `<span style="background-color: #FF9966">${match}</span>`;
              const highlight = `<span id="highlightedPart"; style="background-color: #FF9966">${match}</span>`;
              const regex = new RegExp(escapedMatch, 'g');
              return currentSentence.replace(regex, highlight);
            }, sentence);
            return replacedSentence
    }
}

function processTextWithMultiWordPhraseCaseInsensitiveAndConditionChecking(text, multiWordPhrase) {
  
  const text1 = text.toLowerCase();
  const words = text1.split(" ");

  if (text1.includes(multiWordPhrase)) {
    return words;
  }  
  else {
    multiWordPhraseWords_list = multiWordPhrase.split();

    numberOfWordsInMultiWordPhrase = multiWordPhraseWords_list.length;

    if (numberOfWordsInMultiWordPhrase > 1) {
      numberOfMatches = 0;
      for (word in multiWordPhraseWords_list) {
        if (word in words) {
          numberOfMatches += 1;
        }
      }

      if (numberOfMatches == numberOfWordsInMultiWordPhrase - 1) {
        return words;
      }
    }

    else {

        if (numberOfWordsInMultiWordPhrase == 1) {
          for (word in words) {
            if (word[word.length - 1] == 's') {
              if (multiWordPhraseWords_list[0] == word.slice(0, word.length - 1)) {
                return words;
              }
            }
           }
        }
     
    words.push(multiWordPhrase);

    if (numberOfWordsInMultiWordPhrase == 1 && multiWordPhraseWords_list[0][multiWordPhraseWords_list[0].length - 1] !== 's') {
         words.push(multiWordPhrase +'s');
     }
    return words;
    }
  }
}


function findSentencesContainingWords(text, words) {
    function splitIntoSentences(text) {
        return text.split(/(?:\.|\?|\!|\n|\||;|"|:| however | while | but )/g).filter(sentence => sentence.trim().length > 0);
    }

    function sentenceContainsSeventyPercentWords(sentence, words) {
        let lowerCaseSentence = sentence.toLowerCase();


        let count = words.reduce((accumulator, word) => {
            let normalizedWord = word.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]+$/, '').toLowerCase();
            let regex = new RegExp(`\\b${normalizedWord}\\b`, 'i');
            let normalizedSentence = lowerCaseSentence.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, '');
            return accumulator + (regex.test(normalizedSentence) ? 1 : 0);
        }, 0);


        if (words.length <= 2) {
            ratio = count / words.length;
        }
        else {  
            ratio = count / (words.length-1)
        }

        return ratio >= 0.6;
    }

    let sentences = splitIntoSentences(text);
    return sentences.filter(sentence => sentenceContainsSeventyPercentWords(sentence, words));
}


